<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="author" content="Dan Motzenbecker">
    <meta name="description" content="Serverless WebRTC matchmaking for painless P2P mobile game">
    <title>Dozed Ent - Mobile Game with WebRTC</title>
    <link href="/DozedEnt/images/favicon.png" rel="icon" type="image/png">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital@0;1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="/DozedEnt/site.css">
</head>
<body>
    <div class="game-container">
        <!-- Top HUD -->
        <div class="top-hud">
            <div class="player-info">
                <div class="health-bar">
                    <div class="health-fill"></div>
                    <span class="health-text">100/100</span>
                </div>
                <div class="energy-bar">
                    <div class="energy-fill"></div>
                    <span class="energy-text">50/50</span>
                </div>
            </div>
            <div class="score-info">
                <span class="score">Score: 0</span>
                <span class="level">Lv. 1</span>
            </div>
        </div>

        <!-- Connection Status (from docs/index.html) -->
        <div id="status">
            <div id="peer-count">Players: 1</div>
            <div id="connection-status">Connecting...</div>
        </div>

        <!-- Settings Panel (Hidden by default) -->
        <div class="settings-panel" id="settingsPanel">
            <div class="settings-header">
                <h3>Settings</h3>
                <button class="close-btn" onclick="toggleSettings()">√ó</button>
            </div>
            <div class="settings-content">
                <div class="setting-item">
                    <label>Sound</label>
                    <input type="range" min="0" max="100" value="50">
                </div>
                <div class="setting-item">
                    <label>Vibration</label>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <label>Control Size</label>
                    <select>
                        <option>Small</option>
                        <option selected>Medium</option>
                        <option>Large</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Game Canvas Area with markers support -->
        <div id="canvas" role="region" aria-label="Game area">
            <!-- Markers are injected dynamically: .marker.landmark / .marker.exit / .marker.obstacle -->
        </div>
        <canvas id="gameCanvas"></canvas>

        <!-- Desktop controls tooltip -->
        <div id="controls-tip" hidden>
            <div>Controls</div>
            <ul>
                <li>Move: WASD / Arrows</li>
                <li>Roll: K</li>
                <li>Attack: L</li>
                <li>Block: M</li>
            </ul>
        </div>

        <!-- Mobile Controls -->
        <div class="mobile-controls">
            <!-- Left Side: D-Pad -->
            <div class="left-controls">
                <div class="dpad-container">
                    <div class="dpad">
                        <button class="dpad-btn dpad-up" data-direction="up">‚ñ≤</button>
                        <button class="dpad-btn dpad-right" data-direction="right">‚ñ∂</button>
                        <button class="dpad-btn dpad-down" data-direction="down">‚ñº</button>
                        <button class="dpad-btn dpad-left" data-direction="left">‚óÄ</button>
                        <div class="dpad-center"></div>
                    </div>
                </div>
                
                <!-- Settings Button -->
                <button class="settings-btn" onclick="toggleSettings()">‚öôÔ∏è</button>
            </div>

            <!-- Right Side: Action Buttons -->
            <div class="right-controls">
                <!-- Main Action Buttons -->
                <div class="action-buttons">
                    <button class="action-btn primary" data-action="attack">
                        <span class="btn-icon">‚öîÔ∏è</span>
                        <span class="cooldown"></span>
                    </button>
                    <button class="action-btn secondary" data-action="jump">
                        <span class="btn-icon">‚Üë</span>
                        <span class="cooldown"></span>
                    </button>
                    <button class="action-btn tertiary" data-action="dodge">
                        <span class="btn-icon">üí®</span>
                        <span class="cooldown"></span>
                    </button>
                </div>

                <!-- Skill Buttons -->
                <div class="skill-buttons">
                    <button class="skill-btn" data-skill="1">
                        <span class="skill-icon">üî•</span>
                        <span class="skill-cooldown">3</span>
                    </button>
                    <button class="skill-btn" data-skill="2">
                        <span class="skill-icon">‚ùÑÔ∏è</span>
                        <span class="skill-cooldown"></span>
                    </button>
                    <button class="skill-btn" data-skill="3">
                        <span class="skill-icon">‚ö°</span>
                        <span class="skill-cooldown"></span>
                    </button>
                    <button class="skill-btn ultimate" data-skill="ultimate">
                        <span class="skill-icon">üí•</span>
                        <span class="skill-cooldown"></span>
                        <div class="ultimate-glow"></div>
                    </button>
                </div>

                <!-- Quick Items -->
                <div class="quick-items">
                    <button class="item-btn" data-item="potion">
                        <span class="item-icon">üß™</span>
                        <span class="item-count">5</span>
                    </button>
                    <button class="item-btn" data-item="bomb">
                        <span class="item-icon">üí£</span>
                        <span class="item-count">3</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile joystick (from docs/index.html) -->
        <div id="joystick" hidden>
            <div id="joystick-base">
                <div id="joystick-knob"></div>
            </div>
        </div>

        <!-- Mobile actions (from docs/index.html) -->
        <div id="actions" hidden>
            <button id="attack-button" type="button" aria-label="Attack">ATTACK</button>
            <button id="block-button" type="button" aria-label="Block">BLOCK</button>
            <button id="roll-button" type="button" aria-label="Roll">ROLL</button>
        </div>

        <!-- Mini Map -->
        <div class="minimap">
            <div class="map-container">
                <div class="player-position"></div>
            </div>
        </div>

        <!-- Orientation / fullscreen overlay for mobile (from docs/index.html) -->
        <div id="orientation-overlay" hidden>
            <div class="overlay-box">
                <p class="overlay-title">Rotate your device</p>
                <p class="overlay-msg">For the best experience, play in landscape.</p>
                <button id="overlay-start" type="button">Tap to start</button>
            </div>
        </div>

        <!-- Choice overlay (from docs/index.html) -->
        <div id="choice-overlay" hidden>
            <div class="overlay-box">
                <p class="overlay-title">Choose your boon</p>
                <div class="choices">
                    <button id="choice-0" type="button">Option A</button>
                    <button id="choice-1" type="button">Option B</button>
                    <button id="choice-2" type="button">Option C</button>
                </div>
                <button id="restart-button" type="button">Restart (R)</button>
            </div>
        </div>

        <!-- Game Over overlay (from docs/index.html) -->
        <div id="gameover-overlay" hidden>
            <div class="overlay-box">
                <p class="overlay-title">Game Over</p>
                <p class="overlay-msg">You were taken down by the pack.</p>
                <button id="rematch-button" type="button">Rematch</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="controls.js"></script>
    <script src="/DozedEnt/site.js" type="module"></script>
</body>
</html>