<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roguelite UI</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Game Container -->
    <div id="game-container" class="game-container">
        
        <!-- Main Game View -->
        <div id="game-view" class="game-view">
            <!-- Playfield (game canvas would go here) -->
            <canvas id="game-canvas" class="game-canvas"></canvas>
            
            <!-- HUD Overlay -->
            <div id="hud" class="hud">
                
                <!-- Top Left: Health/Shield/Status -->
                <div class="hud-top-left">
                    <div class="player-vitals">
                        <div class="health-container">
                            <div class="health-bar">
                                <div class="health-fill" id="health-fill"></div>
                                <div class="health-ripple" id="health-ripple"></div>
                            </div>
                            <span class="health-text" id="health-text">100/100</span>
                        </div>
                        <div class="shield-container">
                            <div class="shield-bar">
                                <div class="shield-fill" id="shield-fill"></div>
                            </div>
                            <span class="shield-text" id="shield-text">50/50</span>
                        </div>
                    </div>
                    <div class="status-effects" id="status-effects">
                        <!-- Status effect icons dynamically added here -->
                    </div>
                </div>
                
                <!-- Top Right: Minimap -->
                <div class="hud-top-right">
                    <div class="minimap-container" id="minimap-container">
                        <canvas id="minimap" class="minimap"></canvas>
                        <div class="objective-breadcrumb" id="objective-breadcrumb">
                            <svg class="breadcrumb-line" viewBox="0 0 200 200">
                                <path id="breadcrumb-path" stroke="rgba(255,255,255,0.5)" stroke-width="2" fill="none"/>
                            </svg>
                        </div>
                        <div class="minimap-expanded" id="minimap-expanded">
                            <canvas id="minimap-large" class="minimap-large"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- Bottom Center: Ability Bar -->
                <div class="hud-bottom-center">
                    <div class="ability-bar">
                        <!-- Basic Abilities -->
                        <div class="ability-group basic-abilities">
                            <div class="ability-slot" data-slot="1">
                                <div class="ability-icon">Q</div>
                                <svg class="cooldown-ring" viewBox="0 0 60 60">
                                    <circle cx="30" cy="30" r="28" class="cooldown-track"/>
                                    <circle cx="30" cy="30" r="28" class="cooldown-progress" id="cooldown-1"/>
                                </svg>
                                <span class="ability-keybind">Q</span>
                            </div>
                            <div class="ability-slot" data-slot="2">
                                <div class="ability-icon">W</div>
                                <svg class="cooldown-ring" viewBox="0 0 60 60">
                                    <circle cx="30" cy="30" r="28" class="cooldown-track"/>
                                    <circle cx="30" cy="30" r="28" class="cooldown-progress" id="cooldown-2"/>
                                </svg>
                                <span class="ability-keybind">W</span>
                            </div>
                            <div class="ability-slot" data-slot="3">
                                <div class="ability-icon">E</div>
                                <svg class="cooldown-ring" viewBox="0 0 60 60">
                                    <circle cx="30" cy="30" r="28" class="cooldown-track"/>
                                    <circle cx="30" cy="30" r="28" class="cooldown-progress" id="cooldown-3"/>
                                </svg>
                                <span class="ability-keybind">E</span>
                            </div>
                        </div>
                        
                        <!-- Ultimate -->
                        <div class="ultimate-container">
                            <div class="ultimate-slot" data-slot="ultimate">
                                <div class="ultimate-icon">R</div>
                                <svg class="ultimate-charge" viewBox="0 0 80 80">
                                    <circle cx="40" cy="40" r="38" class="charge-track"/>
                                    <circle cx="40" cy="40" r="38" class="charge-progress" id="ultimate-charge"/>
                                </svg>
                                <span class="ability-keybind">R</span>
                            </div>
                        </div>
                        
                        <!-- Consumables -->
                        <div class="ability-group consumables">
                            <div class="consumable-slot" data-slot="c1">
                                <div class="consumable-icon">1</div>
                                <span class="consumable-count">3</span>
                                <span class="ability-keybind">1</span>
                            </div>
                            <div class="consumable-slot" data-slot="c2">
                                <div class="consumable-icon">2</div>
                                <span class="consumable-count">1</span>
                                <span class="ability-keybind">2</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Damage Vignette -->
            <div class="damage-vignette" id="damage-vignette"></div>
            
            <!-- Pickup Notifications -->
            <div class="pickup-container" id="pickup-container"></div>
        </div>
        
        <!-- Pause Menu Overlay -->
        <div id="pause-menu" class="menu-overlay pause-menu hidden">
            <div class="menu-backdrop"></div>
            <div class="menu-content">
                <div class="menu-tabs">
                    <button class="menu-tab active" data-tab="inventory">Inventory</button>
                    <button class="menu-tab" data-tab="character">Character</button>
                    <button class="menu-tab" data-tab="map">Map</button>
                    <button class="menu-tab" data-tab="settings">Settings</button>
                </div>
                <div class="menu-panels">
                    <div class="menu-panel active" id="inventory-panel">
                        <h2>Inventory</h2>
                        <div class="inventory-grid">
                            <!-- Inventory slots dynamically added -->
                        </div>
                    </div>
                    <div class="menu-panel" id="character-panel">
                        <h2>Character</h2>
                        <div class="character-stats">
                            <!-- Character stats dynamically added -->
                        </div>
                    </div>
                    <div class="menu-panel" id="map-panel">
                        <h2>Map</h2>
                        <canvas id="full-map" class="full-map"></canvas>
                    </div>
                    <div class="menu-panel" id="settings-panel">
                        <h2>Settings</h2>
                        <div class="settings-content">
                            <!-- Gameplay Settings -->
                            <div class="settings-section">
                                <h3>Gameplay</h3>
                                <div class="setting-item">
                                    <label for="screen-shake">Screen Shake</label>
                                    <input type="checkbox" id="screen-shake" checked>
                                </div>
                            </div>
                            
                            <!-- Accessibility Settings -->
                            <div class="settings-section">
                                <h3>Accessibility</h3>
                                <div class="setting-item">
                                    <label for="text-scale">Text Scale</label>
                                    <input type="range" id="text-scale" min="80" max="150" value="100">
                                    <span class="setting-value">100%</span>
                                </div>
                                <div class="setting-item">
                                    <label for="colorblind-mode">Colorblind Mode</label>
                                    <select id="colorblind-mode">
                                        <option value="none">None</option>
                                        <option value="protanopia">Protanopia</option>
                                        <option value="deuteranopia">Deuteranopia</option>
                                        <option value="tritanopia">Tritanopia</option>
                                    </select>
                                </div>
                                <div class="setting-item">
                                    <label for="reduce-motion">Reduce Motion</label>
                                    <input type="checkbox" id="reduce-motion">
                                </div>
                            </div>
                            
                            <!-- Controls -->
                            <div class="settings-section">
                                <h3>Controls</h3>
                                <button id="open-keybinds" class="btn-primary">Configure Keybinds</button>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="menu-close" id="close-pause">Resume Game (ESC)</button>
            </div>
        </div>
        
        <!-- Keybind Configuration Overlay -->
        <div id="keybind-menu" class="menu-overlay keybind-menu hidden">
            <div class="menu-backdrop"></div>
            <div class="menu-content keybind-content">
                <h2>Configure Controls</h2>
                <div class="keybind-list" id="keybind-list">
                    <!-- Keybinds dynamically populated -->
                </div>
                <div class="keybind-actions">
                    <button id="reset-keybinds" class="btn-secondary">Reset to Defaults</button>
                    <button id="close-keybinds" class="btn-primary">Done</button>
                </div>
            </div>
        </div>
        
        <!-- Meta Progression Screen -->
        <div id="meta-progression" class="menu-overlay meta-progression hidden">
            <div class="menu-content meta-content">
                <h1>Meta Progression</h1>
                
                <!-- Currency Display -->
                <div class="currency-display">
                    <div class="currency-item">
                        <span class="currency-icon">💎</span>
                        <span class="currency-amount" id="banked-currency">1250</span>
                        <span class="currency-label">Banked</span>
                    </div>
                    <div class="currency-item spent">
                        <span class="currency-icon">💰</span>
                        <span class="currency-amount" id="spent-currency">750</span>
                        <span class="currency-label">Spent</span>
                    </div>
                </div>
                
                <!-- Upgrade Tracks -->
                <div class="upgrade-tracks">
                    <div class="upgrade-track" data-track="power">
                        <h2>Power</h2>
                        <div class="track-progress">
                            <div class="track-fill" style="width: 40%"></div>
                        </div>
                        <div class="track-nodes">
                            <div class="track-node unlocked"></div>
                            <div class="track-node unlocked"></div>
                            <div class="track-node"></div>
                            <div class="track-node"></div>
                            <div class="track-node"></div>
                        </div>
                        <button class="upgrade-btn" data-cost="250">Upgrade (250 💎)</button>
                    </div>
                    
                    <div class="upgrade-track" data-track="defense">
                        <h2>Defense</h2>
                        <div class="track-progress">
                            <div class="track-fill" style="width: 20%"></div>
                        </div>
                        <div class="track-nodes">
                            <div class="track-node unlocked"></div>
                            <div class="track-node"></div>
                            <div class="track-node"></div>
                            <div class="track-node"></div>
                            <div class="track-node"></div>
                        </div>
                        <button class="upgrade-btn" data-cost="200">Upgrade (200 💎)</button>
                    </div>
                    
                    <div class="upgrade-track" data-track="utility">
                        <h2>Utility</h2>
                        <div class="track-progress">
                            <div class="track-fill" style="width: 60%"></div>
                        </div>
                        <div class="track-nodes">
                            <div class="track-node unlocked"></div>
                            <div class="track-node unlocked"></div>
                            <div class="track-node unlocked"></div>
                            <div class="track-node"></div>
                            <div class="track-node"></div>
                        </div>
                        <button class="upgrade-btn" data-cost="300">Upgrade (300 💎)</button>
                    </div>
                </div>
                
                <button id="start-run" class="btn-primary btn-large">Start New Run</button>
            </div>
        </div>
        
        <!-- Run Summary Screen -->
        <div id="run-summary" class="menu-overlay run-summary hidden">
            <div class="menu-content summary-content">
                <h1>Run Complete</h1>
                
                <div class="death-info">
                    <div class="death-cause">
                        <span class="label">Cause of Death:</span>
                        <span class="value" id="death-cause">Overwhelmed by Shadow Wraiths</span>
                    </div>
                </div>
                
                <div class="run-stats">
                    <div class="stat-highlight">
                        <span class="stat-value" id="top-stat-value">2,847</span>
                        <span class="stat-label" id="top-stat-label">Damage Dealt</span>
                    </div>
                    
                    <div class="standout-moment">
                        <span class="moment-icon">⚡</span>
                        <span class="moment-text" id="standout-moment">Critical chain: 5 enemies in 2.3 seconds!</span>
                    </div>
                </div>
                
                <div class="rewards">
                    <h3>Rewards Earned</h3>
                    <div class="reward-list">
                        <div class="reward-item">
                            <span class="reward-icon">💎</span>
                            <span class="reward-amount">+150</span>
                        </div>
                    </div>
                </div>
                
                <div class="summary-actions">
                    <button id="view-stats" class="btn-secondary">Detailed Stats</button>
                    <button id="continue-meta" class="btn-primary">Continue</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="game-ui.js"></script>
    <script src="input-manager.js"></script>
    <script src="accessibility.js"></script>
</body>
</html>