<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: monospace;
            background: #1a1a1a;
            color: #0f0;
        }
        #status {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #0f0;
            background: #000;
        }
        .error { color: #f00; }
        .success { color: #0f0; }
        .warning { color: #ff0; }
    </style>
</head>
<body>
    <div id="status">
        <h2>Game Loading Test</h2>
        <div id="results"></div>
    </div>
    
    <script type="module">
        const results = document.getElementById('results');
        let errors = [];
        let warnings = [];
        let successes = [];
        
        // Capture console errors
        const originalError = console.error;
        console.error = function(...args) {
            errors.push(args.join(' '));
            originalError.apply(console, args);
        };
        
        const originalWarn = console.warn;
        console.warn = function(...args) {
            warnings.push(args.join(' '));
            originalWarn.apply(console, args);
        };
        
        async function testGame() {
            results.innerHTML = '<p>Testing game modules...</p>';
            
            try {
                // Test MQTT bundle
                const mqtt = await import('./docs/dist/trystero-mqtt.min.js');
                successes.push('✓ MQTT bundle loaded');
            } catch (e) {
                errors.push(`✗ MQTT bundle failed: ${e.message}`);
            }
            
            try {
                // Test game renderer
                const { default: GameRenderer } = await import('./docs/game-renderer.js');
                successes.push('✓ GameRenderer loaded');
                
                // Try to create instance
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const renderer = new GameRenderer(ctx, canvas);
                successes.push('✓ GameRenderer instantiated');
            } catch (e) {
                errors.push(`✗ GameRenderer failed: ${e.message}`);
            }
            
            try {
                // Test camera effects
                const { default: CameraEffects } = await import('./docs/camera-effects.js');
                successes.push('✓ CameraEffects loaded');
            } catch (e) {
                errors.push(`✗ CameraEffects failed: ${e.message}`);
            }
            
            try {
                // Test wolf character
                const { WolfCharacter } = await import('./docs/wolf-character.js');
                successes.push('✓ WolfCharacter loaded');
            } catch (e) {
                errors.push(`✗ WolfCharacter failed: ${e.message}`);
            }
            
            try {
                // Test wolf AI
                const { EnhancedWolfAISystem } = await import('./docs/wolf-ai-enhanced.js');
                successes.push('✓ EnhancedWolfAISystem loaded');
            } catch (e) {
                errors.push(`✗ EnhancedWolfAISystem failed: ${e.message}`);
            }
            
            try {
                // Test room manager
                const { default: EnhancedRoomManager } = await import('./docs/enhanced-room-manager.js');
                successes.push('✓ EnhancedRoomManager loaded');
            } catch (e) {
                errors.push(`✗ EnhancedRoomManager failed: ${e.message}`);
            }
            
            // Display results
            let html = '';
            
            if (successes.length > 0) {
                html += '<h3 class="success">Successes:</h3>';
                successes.forEach(s => {
                    html += `<p class="success">${s}</p>`;
                });
            }
            
            if (warnings.length > 0) {
                html += '<h3 class="warning">Warnings:</h3>';
                warnings.forEach(w => {
                    html += `<p class="warning">${w}</p>`;
                });
            }
            
            if (errors.length > 0) {
                html += '<h3 class="error">Errors:</h3>';
                errors.forEach(e => {
                    html += `<p class="error">${e}</p>`;
                });
            }
            
            if (errors.length === 0 && warnings.length === 0) {
                html += '<h3 class="success">✓ All tests passed! Game modules are working correctly.</h3>';
            }
            
            results.innerHTML = html;
        }
        
        // Run tests
        testGame();
    </script>
</body>
</html>