<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Test - DozedEnt</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            background: #2a2a2a;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #444;
        }
        
        canvas {
            border: 2px solid #00ff00;
            background: #000;
            margin: 10px 0;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .status.success { background: #4CAF50; }
        .status.error { background: #f44336; }
        .status.info { background: #2196F3; }
        
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #357abd;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üéÆ DozedEnt Canvas Test</h1>
        
        <div class="test-section">
            <h2>Basic Canvas Test</h2>
            <canvas id="basicCanvas" width="400" height="200"></canvas>
            <div id="basicTestResult"></div>
            <button onclick="testBasicCanvas()">Test Basic Canvas</button>
        </div>
        
        <div class="test-section">
            <h2>Game Canvas Test</h2>
            <canvas id="gameCanvas" width="1280" height="720"></canvas>
            <div id="gameCanvasResult"></div>
            <button onclick="testGameCanvas()">Test Game Canvas</button>
        </div>
        
        <div class="test-section">
            <h2>Canvas Visibility Test</h2>
            <div id="visibilityResult"></div>
            <button onclick="testVisibility()">Test Visibility</button>
            <button onclick="forceShowCanvas()">Force Show Canvas</button>
        </div>
        
        <div class="test-section">
            <h2>Animation Test</h2>
            <canvas id="animationCanvas" width="400" height="200"></canvas>
            <div id="animationResult"></div>
            <button onclick="startAnimation()">Start Animation</button>
            <button onclick="stopAnimation()">Stop Animation</button>
        </div>
    </div>

    <script>
        let animationId = null;
        
        function testBasicCanvas() {
            const canvas = document.getElementById('basicCanvas');
            const result = document.getElementById('basicTestResult');
            
            try {
                const ctx = canvas.getContext('2d');
                if (!ctx) {
                    result.innerHTML = '<div class="status error">‚ùå Failed to get 2D context</div>';
                    return;
                }
                
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw test pattern
                ctx.fillStyle = '#00ff00';
                ctx.fillRect(10, 10, 100, 50);
                
                ctx.fillStyle = '#ff0000';
                ctx.font = '16px Arial';
                ctx.fillText('Canvas Working!', 120, 40);
                
                ctx.strokeStyle = '#0000ff';
                ctx.lineWidth = 3;
                ctx.strokeRect(5, 5, 390, 190);
                
                result.innerHTML = '<div class="status success">‚úÖ Basic canvas test passed - green rectangle, red text, and blue border should be visible</div>';
            } catch (error) {
                result.innerHTML = `<div class="status error">‚ùå Canvas test failed: ${error.message}</div>`;
            }
        }
        
        function testGameCanvas() {
            const canvas = document.getElementById('gameCanvas');
            const result = document.getElementById('gameCanvasResult');
            
            try {
                const ctx = canvas.getContext('2d');
                if (!ctx) {
                    result.innerHTML = '<div class="status error">‚ùå Failed to get 2D context from game canvas</div>';
                    return;
                }
                
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw game-like content
                // Background gradient
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#1a1a2e');
                gradient.addColorStop(0.5, '#16213e');
                gradient.addColorStop(1, '#0f3460');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw some game elements
                ctx.fillStyle = '#4a90e2';
                ctx.fillRect(100, 100, 50, 50); // Player-like square
                
                ctx.fillStyle = '#ff6b6b';
                ctx.fillRect(200, 150, 30, 30); // Enemy-like square
                
                ctx.fillStyle = '#ffffff';
                ctx.font = '24px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Game Canvas Test', canvas.width / 2, 50);
                
                ctx.fillStyle = '#ffff00';
                ctx.font = '16px Arial';
                ctx.fillText('Player (Blue)', 125, 90);
                ctx.fillText('Enemy (Red)', 215, 140);
                
                result.innerHTML = '<div class="status success">‚úÖ Game canvas test passed - gradient background, colored squares, and text should be visible</div>';
            } catch (error) {
                result.innerHTML = `<div class="status error">‚ùå Game canvas test failed: ${error.message}</div>`;
            }
        }
        
        function testVisibility() {
            const result = document.getElementById('visibilityResult');
            const gameCanvas = document.getElementById('gameCanvas');
            
            if (!gameCanvas) {
                result.innerHTML = '<div class="status error">‚ùå Game canvas not found</div>';
                return;
            }
            
            const styles = getComputedStyle(gameCanvas);
            let html = '<div class="status info">‚ÑπÔ∏è Canvas visibility info:</div>';
            html += `<div style="font-family: monospace; background: #333; padding: 10px; border-radius: 4px; margin: 10px 0;">`;
            html += `Display: ${styles.display}<br>`;
            html += `Visibility: ${styles.visibility}<br>`;
            html += `Opacity: ${styles.opacity}<br>`;
            html += `Position: ${styles.position}<br>`;
            html += `Width: ${styles.width}<br>`;
            html += `Height: ${styles.height}<br>`;
            html += `Z-index: ${styles.zIndex}<br>`;
            html += `Background: ${styles.background}<br>`;
            html += `Transform: ${styles.transform}<br>`;
            html += `</div>`;
            
            // Check for issues
            const issues = [];
            if (styles.display === 'none') issues.push('Display is none');
            if (styles.visibility === 'hidden') issues.push('Visibility is hidden');
            if (parseFloat(styles.opacity) === 0) issues.push('Opacity is 0');
            if (styles.width === '0px') issues.push('Width is 0px');
            if (styles.height === '0px') issues.push('Height is 0px');
            
            if (issues.length > 0) {
                html += '<div class="status error">‚ùå Issues found:<br>' + issues.join('<br>') + '</div>';
            } else {
                html += '<div class="status success">‚úÖ No obvious visibility issues</div>';
            }
            
            result.innerHTML = html;
        }
        
        function forceShowCanvas() {
            document.body.classList.add('game-started');
            document.getElementById('visibilityResult').innerHTML = '<div class="status success">‚úÖ Forced canvas visibility - game-started class added to body</div>';
        }
        
        function startAnimation() {
            const canvas = document.getElementById('animationCanvas');
            const result = document.getElementById('animationResult');
            
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            
            let frame = 0;
            
            function animate() {
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw animated content
                const time = frame * 0.1;
                const x = canvas.width / 2 + Math.sin(time) * 100;
                const y = canvas.height / 2 + Math.cos(time) * 50;
                
                ctx.fillStyle = `hsl(${(frame * 2) % 360}, 70%, 50%)`;
                ctx.beginPath();
                ctx.arc(x, y, 20, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#ffffff';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`Frame: ${frame}`, canvas.width / 2, canvas.height - 20);
                
                frame++;
                animationId = requestAnimationFrame(animate);
            }
            
            animate();
            result.innerHTML = '<div class="status success">‚úÖ Animation started - colored circle should be moving</div>';
        }
        
        function stopAnimation() {
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
                document.getElementById('animationResult').innerHTML = '<div class="status info">‚ÑπÔ∏è Animation stopped</div>';
            }
        }
        
        // Auto-run basic tests when page loads
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                testBasicCanvas();
                testGameCanvas();
                testVisibility();
            }, 500);
        });
    </script>
</body>
</html>
